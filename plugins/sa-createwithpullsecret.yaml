apiVersion: krew.googlecontainertools.github.com/v1alpha2
kind: Plugin
metadata:
  name: sa-createwithpullsecret
spec:
  version: "v1.0.0"
  homepage: https://gitlab.com/howtodoit/kubernetes/plugin/sa-createwithpullsecret
  shortDescription: "This plugin allows to create a ServiceAccount in specified namespace using docker registry credentials"
  description: |
    This plugin allows to create a ServiceAccount in specified namespace using docker registry credentials. If the space does not exist it will be created. 
    Common use case is to prepare the Service Account to allow pod to download from authenticated registry. Ex. in deployment manifest
    ...
    spec:
      serviceAccountName: my-sa 
    ...
    You can also generate kubeconfig file for this Service Account using other plugin sa-genkubeconfig and use it to kubernetes cluster connection in a Continuous Delivery scenario 
    or from kubectl client tool to run application following the principle of least privilege. 
  platforms:
  - selector:
      matchExpressions:
      - key: "os"
        operator: "In"
        values:
        - darwin
        - linux
    uri: https://gitlab.com/howtodoit/kubernetes/plugin/sa-createwithpullsecret/-/archive/v1.0.0/sa-createwithpullsecret-v1.0.0.tar.gz
    sha256: 63dfc30f7ff5fdac700f1fda8ac4758eda7dd3c9acb1018a3fe04df02918dddb
    files:
    - from: "sa-createwithpullsecret/sa-createwithpullsecret.sh"
      to: "sa-createwithpullsecret.sh"
    - from: "sa-createwithpullsecret/README.md"
      to: "README.md"
    bin: sa-createwithpullsecret.sh